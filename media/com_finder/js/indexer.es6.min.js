((e,r)=>{"use strict";if(!e)throw new Error("core.js was not properly initialised");e.finderIndexer=(()=>{let t,n=null,s=null,o=null,a=!1;const d=`&${r.getElementById("finder-indexer-token").getAttribute("name")}=1`,i=e=>{const t=r.getElementById(e);return t?t.parentNode.removeChild(t):null},l=(d,l)=>{const c=r.getElementById("finder-progress-header"),m=r.getElementById("finder-progress-message");try{if(null===d)throw new Error(l);if(d.error)throw new Error(d);d.start&&(n=d.totalItems),s+=d.batchOffset,((e,t)=>{o=s/n*100;const a=r.getElementById("progress-bar"),d=r.getElementById("finder-progress-header"),i=r.getElementById("finder-progress-message");d&&(d.innerText=e),i&&(i.innerHTML=t),a&&(o<100?(a.style.width=`${o}%`,a.setAttribute("aria-valuenow",o)):(a.classList.remove("bar-success"),a.classList.add("bar-warning"),a.setAttribute("aria-valuemin",100),a.setAttribute("aria-valuemax",200),a.style.width=`${o}%`,a.setAttribute("aria-valuenow",o)))})(d.header,d.message),s<n?t("indexer.batch"):a||(a=!0,t("indexer.optimize"))}catch(r){i("progress");try{d.error&&(c&&(c.innerText=d.header,c.classList.add("finder-error")),m&&(m.innerHTML=d.message,m.classList.add("finder-error")))}catch(t){""===r&&(r=e.JText._("COM_FINDER_NO_ERROR_RETURNED")),c&&(c.innerText=e.JText._("COM_FINDER_AN_ERROR_HAS_OCCURRED"),c.classList.add("finder-error")),m&&(m.innerHTML=r,m.classList.add("finder-error"))}}return!0};s=0,o=0,(t=(t=>{e.request({url:`index.php?option=com_finder&tmpl=component&format=json&task=${t}${d}`,method:"GET",data:"",perform:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},onSuccess:e=>{l(JSON.parse(e))},onError:t=>{(t=>{const n=r.getElementById("finder-progress-header"),s=r.getElementById("finder-progress-message");let o="object"==typeof t&&t.responseText?t.responseText:null;o=o?JSON.parse(o):null,i("progress"),o&&(o=null!==o.responseText?o.evaluate(o.responseText,!0):o);const a=o?o.header:e.JText._("COM_FINDER_AN_ERROR_HAS_OCCURRED"),d=o?o.message:`${e.JText._("COM_FINDER_MESSAGE_RETURNED")}<br>${o}`;n&&(n.innerText=a,n.classList.add("finder-error")),s&&(s.innerHTML=d,s.classList.add("finder-error"))})(t)}})}))("indexer.start")})})(Joomla,document),document.addEventListener("DOMContentLoaded",()=>{window.Indexer=Joomla.finderIndexer()});