((t,e,n,o)=>{"use strict";e.JoomlaTinyMCE={setupEditors:t=>{const n=t||o,i=e.getOptions?e.getOptions("plg_editor_tinymce",{}):e.optionsStorage.plg_editor_tinymce||{};[].slice.call(n.querySelectorAll(".js-editor-tinymce")).forEach(t=>{const n=t.querySelector("textarea");e.JoomlaTinyMCE.setupEditor(n,i)})},setupEditor:(n,i)=>{if(e.editors.instances[n.id])return;const s=n?n.getAttribute("name").replace(/\[\]|\]/g,"").split("[").pop():"default",d=i&&i.tinyMCE||{},a=d.default||{};let c=d[s]?d[s]:a;c=c.joomlaMergeDefaults?e.extend(e.extend({},a),c):e.extend({},c),n&&(c.selector=null,c.target=n);const r=[];Object.keys(c.joomlaExtButtons.names).map(t=>c.joomlaExtButtons.names[t]).forEach(t=>{const e={};e.text=t.name,e.icon=t.icon,t.href?e.onclick=(()=>{o.getElementById(`${t.id}Modal`).open()}):e.onclick=(()=>{new Function(t.click)()}),r.push(e)}),c.setup=(t=>{t.addButton("jxtdbuttons",{type:"menubutton",text:e.JText._("PLG_TINY_CORE_BUTTONS"),icon:"none icon-joomla",menu:r})});const l=new t.Editor(n.id,c,tinymce.EditorManager);l.render(),e.editors.instances[n.id]={getValue:()=>e.editors.instances[n.id].instance.getContent(),setValue:t=>e.editors.instances[n.id].instance.setContent(t),replaceSelection:t=>e.editors.instances[n.id].instance.execCommand("mceInsertContent",!1,t),id:n.id,instance:l,onSave:()=>(e.editors.instances[n.id].instance.isHidden()&&e.editors.instances[n.id].instance.show(),"")},o.getElementById(l.id).form.addEventListener("submit",()=>e.editors.instances[l.targetElm.id].onSave())}},o.addEventListener("DOMContentLoaded",()=>{e.JoomlaTinyMCE.setupEditors(o)}),o.addEventListener("joomla:updated",t=>e.JoomlaTinyMCE.setupEditors(t.target))})(window.tinyMCE,Joomla,window,document);