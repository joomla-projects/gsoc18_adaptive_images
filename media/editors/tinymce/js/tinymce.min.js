!function(t,n,e,i){"use strict";n.JoomlaTinyMCE={setupEditors:function(t){var e=t||i,o=n.getOptions?n.getOptions("plg_editor_tinymce",{}):n.optionsStorage.plg_editor_tinymce||{};[].slice.call(e.querySelectorAll(".js-editor-tinymce")).forEach(function(t){var e=t.querySelector("textarea");n.JoomlaTinyMCE.setupEditor(e,o)})},setupEditor:function(e,o){if(!n.editors.instances[e.id]){var s=e?e.getAttribute("name").replace(/\[\]|\]/g,"").split("[").pop():"default",r=o&&o.tinyMCE||{},a=r.default||{},c=r[s]?r[s]:a;c=c.joomlaMergeDefaults?n.extend(n.extend({},a),c):n.extend({},c),e&&(c.selector=null,c.target=e);var d=[];Object.keys(c.joomlaExtButtons.names).map(function(t){return c.joomlaExtButtons.names[t]}).forEach(function(t){var n={};n.text=t.name,n.icon=t.icon,t.href?n.onclick=function(){i.getElementById(t.id+"Modal").open()}:n.onclick=function(){new Function(t.click)()},d.push(n)}),c.setup=function(t){t.addButton("jxtdbuttons",{type:"menubutton",text:n.JText._("PLG_TINY_CORE_BUTTONS"),icon:"none icon-joomla",menu:d})};var u=new t.Editor(e.id,c,tinymce.EditorManager);u.render(),n.editors.instances[e.id]={getValue:function(){return n.editors.instances[e.id].instance.getContent()},setValue:function(t){return n.editors.instances[e.id].instance.setContent(t)},replaceSelection:function(t){return n.editors.instances[e.id].instance.execCommand("mceInsertContent",!1,t)},id:e.id,instance:u,onSave:function(){return n.editors.instances[e.id].instance.isHidden()&&n.editors.instances[e.id].instance.show(),""}},i.getElementById(u.id).form.addEventListener("submit",function(){return n.editors.instances[u.targetElm.id].onSave()})}}},i.addEventListener("DOMContentLoaded",function(){n.JoomlaTinyMCE.setupEditors(i)}),i.addEventListener("joomla:updated",function(t){return n.JoomlaTinyMCE.setupEditors(t.target)})}(window.tinyMCE,Joomla,window,document);
