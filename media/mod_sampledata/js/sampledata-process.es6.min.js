((e,t,a)=>{"use strict";a.SampleData={inProgress:!1},a.sampledataAjax=((e,s,r)=>{const l=a.getOptions("sample-data"),d=t.createElement("li");d.classList.add(`sampledata-steps-${e}-${r}`);const o=t.createElement("p");o.classList.add("loader-image"),o.classList.add("text-center");const n=t.createElement("img");n.setAttribute("src",l.icon),n.setAttribute("width",30),n.setAttribute("height",30),o.appendChild(n),d.appendChild(o),t.querySelector(`.sampledata-progress-${e} ul`).appendChild(d),a.request({url:`index.php?option=com_ajax&format=json&group=sampledata&type=${e}&plugin=SampledataApplyStep${r}&step=${r}`,method:"GET",perform:!0,onSuccess:l=>{const o=JSON.parse(l);let n,p="";const c=d.querySelector(".loader-image");if(c.parentNode.removeChild(c),o.success&&o.data&&o.data.length>0){const l=t.querySelector(`.sampledata-progress-${e} .progress-bar`);if(o.data.forEach(t=>{null!==t&&(n=t.success,p=n?"bg-success":"bg-danger",n?a.renderMessages({success:[t.message]},`.sampledata-steps-${e}-${r}`):a.renderMessages({error:[t.message]},`.sampledata-steps-${e}-${r}`))}),l.innerText=`${r}/${s}`,l.style.width=`${r/s*100}%`,l.classList.add(p),n&&r<=s){const t=r+1;t<=s&&a.sampledataAjax(e,s,t)}}else a.renderMessages({error:[a.JText._("MOD_SAMPLEDATA_INVALID_RESPONSE")]},`.sampledata-steps-${e}-${r}`),a.SampleData.inProgress=!1},onError:()=>{alert("Something went wrong! Please close and reopen the browser and try again!")}})}),a.sampledataApply=(s=>{const r=s.getAttribute("data-type"),l=s.getAttribute("data-steps");if(!a.SampleData.inProgress){if(!s.getAttribute("data-processed"))return!!e.confirm(a.JText._("MOD_SAMPLEDATA_CONFIRM_START"))&&([].slice.call(t.querySelectorAll(`.sampledata-progress-${r}`)).forEach(e=>{e.classList.remove("d-none")}),s.getAttribute("data-processed",!0),a.SampleData.inProgress=!0,a.sampledataAjax(r,l,1),!1);alert(a.JText._("MOD_SAMPLEDATA_ITEM_ALREADY_PROCESSED"))}});const s=()=>{const e=t.getElementById("sample-data-wrapper");if(e){[].slice.call(e.querySelectorAll(".apply-sample-data")).forEach(e=>{e.addEventListener("click",e=>a.sampledataApply(e.target))})}t.removeEventListener("DOMContentLoaded",s)};t.addEventListener("DOMContentLoaded",s)})(window,document,window.Joomla);