!function(e,a,t){"use strict";t.SampleData={inProgress:!1},t.sampledataAjax=function(e,s,r){var n=t.getOptions("sample-data"),l=a.createElement("li");l.classList.add("sampledata-steps-"+e+"-"+r);var d=a.createElement("p");d.classList.add("loader-image"),d.classList.add("text-center");var o=a.createElement("img");o.setAttribute("src",n.icon),o.setAttribute("width",30),o.setAttribute("height",30),d.appendChild(o),l.appendChild(d),a.querySelector(".sampledata-progress-"+e+" ul").appendChild(l),t.request({url:"index.php?option=com_ajax&format=json&group=sampledata&type="+e+"&plugin=SampledataApplyStep"+r+"&step="+r,method:"GET",perform:!0,onSuccess:function(n){var d=JSON.parse(n),o="",p=void 0,i=l.querySelector(".loader-image");if(i.parentNode.removeChild(i),d.success&&d.data&&d.data.length>0){var c=a.querySelector(".sampledata-progress-"+e+" .progress-bar");if(d.data.forEach(function(a){null!==a&&(p=a.success,o=p?"bg-success":"bg-danger",p?t.renderMessages({success:[a.message]},".sampledata-steps-"+e+"-"+r):t.renderMessages({error:[a.message]},".sampledata-steps-"+e+"-"+r))}),c.innerText=r+"/"+s,c.style.width=r/s*100+"%",c.classList.add(o),p&&r<=s){var m=r+1;m<=s&&t.sampledataAjax(e,s,m)}}else t.renderMessages({error:[t.JText._("MOD_SAMPLEDATA_INVALID_RESPONSE")]},".sampledata-steps-"+e+"-"+r),t.SampleData.inProgress=!1},onError:function(){alert("Something went wrong! Please close and reopen the browser and try again!")}})},t.sampledataApply=function(s){var r=s.getAttribute("data-type"),n=s.getAttribute("data-steps");if(!t.SampleData.inProgress){if(!s.getAttribute("data-processed"))return!!e.confirm(t.JText._("MOD_SAMPLEDATA_CONFIRM_START"))&&([].slice.call(a.querySelectorAll(".sampledata-progress-"+r)).forEach(function(e){e.classList.remove("d-none")}),s.getAttribute("data-processed",!0),t.SampleData.inProgress=!0,t.sampledataAjax(r,n,1),!1);alert(t.JText._("MOD_SAMPLEDATA_ITEM_ALREADY_PROCESSED"))}};a.addEventListener("DOMContentLoaded",function e(){var s=a.getElementById("sample-data-wrapper");s&&[].slice.call(s.querySelectorAll(".apply-sample-data")).forEach(function(e){e.addEventListener("click",function(e){return t.sampledataApply(e.target)})});a.removeEventListener("DOMContentLoaded",e)})}(window,document,window.Joomla);
