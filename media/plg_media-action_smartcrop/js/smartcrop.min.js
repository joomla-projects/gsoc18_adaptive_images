Joomla=window.Joomla||{},Joomla.MediaManager=Joomla.MediaManager||{},Joomla.MediaManager.Edit=Joomla.MediaManager.Edit||{},function(){"use strict";function a(a){for(var t=window.location.search.substring(1).split("&"),e=0;e<t.length;e++){var o=t[e].split("=");if(decodeURIComponent(o[0])==a)return decodeURIComponent(o[1])}return!1}function t(){var a=window.location.origin,t=window.location.pathname.split("/");return"administrator"!=t[1]?a+"/"+t[1]:a}Joomla.MediaManager.Edit.smartcrop={Activate:function(e){!function(e){var o=document.getElementById("image-preview");Joomla.MediaManager.Edit.smartcrop.cropper=new Cropper(o,{viewMode:1,responsive:!1,restore:!0,autoCrop:!0,movable:!0,zoomable:!1,rotatable:!1,autoCropArea:0,minContainerWidth:o.offsetWidth,minContainerHeight:o.offsetHeight,crop:function(a){var t,e,r,i;t=Math.round(a.detail.x),e=Math.round(a.detail.y),r=Math.round(a.detail.width),i=Math.round(a.detail.height),o.naturalWidth,o.naturalHeight,Joomla.MediaManager.Edit.smartcrop.cropper.boxLeft=t,Joomla.MediaManager.Edit.smartcrop.cropper.boxTop=e,Joomla.MediaManager.Edit.smartcrop.cropper.boxWidth=r,Joomla.MediaManager.Edit.smartcrop.cropper.boxHeight=i,document.getElementById("jform_data_focus_x").value=t,document.getElementById("jform_data_focus_y").value=e,document.getElementById("jform_data_focus_width").value=r,document.getElementById("jform_data_focus_height").value=i,window.dispatchEvent(new Event("mediaManager.history.point"))}}),o.addEventListener("load",function(){var a=o.naturalWidth/o.naturalHeight;Joomla.MediaManager.Edit.smartcrop.cropper.setAspectRatio(a)});var r,i,n,d;i="/images"+(i=a("path").split(":"))[1],n=new XMLHttpRequest,d=t()+"/administrator/index.php?option=com_media&task=adaptiveimage.cropBoxData&path="+i,n.open("GET",d,!0),n.onreadystatechange=function(){4==this.readyState&&200==this.status&&""!=this.response&&(r=JSON.parse(this.responseText),Joomla.MediaManager.Edit.smartcrop.cropper.setData({x:r["box-left"],y:r["box-top"],width:r["box-width"],height:r["box-height"]}))},n.send()}()},Deactivate:function(){var e=a("path");e="/images"+(e=e.split(":"))[1];var o="&box-left="+Joomla.MediaManager.Edit.smartcrop.cropper.boxLeft+"&box-top="+Joomla.MediaManager.Edit.smartcrop.cropper.boxTop+"&box-width="+Joomla.MediaManager.Edit.smartcrop.cropper.boxWidth+"&box-height="+Joomla.MediaManager.Edit.smartcrop.cropper.boxHeight,r=new XMLHttpRequest,i=t()+"/administrator/index.php?option=com_media&task=AdaptiveImage.setfocus&path="+e;i+=o,r.open("GET",i,!0),r.send(),Joomla.MediaManager.Edit.smartcrop.cropper&&Joomla.MediaManager.Edit.smartcrop.cropper.destroy()}}}();